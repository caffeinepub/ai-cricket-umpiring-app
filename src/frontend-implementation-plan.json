{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "MR.AI UMPIRE glitch-fix pass (frontend QA, branding, theme + runtime stability)",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Run an end-to-end frontend QA pass and fix runtime errors, broken UI states, and navigation/back-flow issues across capture/upload, analysis playback, and theme switching.",
      "acceptanceCriteria": [
        "App loads without console errors in a fresh session (logged out) and after Internet Identity login.",
        "User can record or select a video, proceed to analysis, and return back without getting stuck or seeing blank screens.",
        "No repeating/stacking timers or memory leaks are observed during play/pause cycles (intervals are created and cleaned up correctly)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/main.tsx",
          "operation": "modify",
          "description": "Remove the duplicate QueryClientProvider wrapper so React Query is provided by a single source (keep App's configured QueryClient). This reduces conflicting caches/refetches and helps prevent QA-discovered runtime/UI inconsistencies."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Harden the capture→analysis→back flow: ensure returning from AnalysisView reliably resets state and performs cleanup (e.g., revoke any created object URLs when leaving analysis or switching videos) to prevent blank screens/memory leaks found during manual testing."
        },
        {
          "path": "frontend/src/components/AnalysisView.tsx",
          "operation": "modify",
          "description": "Fix playback/analysis runtime issues: ensure the analysis interval is never duplicated, is always cleared on pause/ended/unmount, and cannot stack across play/pause cycles; stabilize play/pause state updates to match the actual video element state."
        },
        {
          "path": "frontend/src/components/VideoCapture.tsx",
          "operation": "modify",
          "description": "Improve camera/recording/upload UX stability: ensure cancel/back actions cleanly stop any active recording/streams, prevent invalid interactions while switching/recording, and clean up any temporary object URLs created for previews. Use the selected component \"camera\" (the unmodifiable useCamera hook) for camera handling; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update branding and visible UI text so the app name displays as \"MR.AI UMPIRE\" everywhere (header and other user-facing locations).",
      "acceptanceCriteria": [
        "Header title text displays exactly \"MR.AI UMPIRE\".",
        "No remaining occurrences of the old app name are visible in the UI."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/Header.tsx",
          "operation": "modify",
          "description": "Change the header branding text to display exactly \"MR.AI UMPIRE\" and ensure any adjacent tagline text remains consistent with the new name."
        },
        {
          "path": "frontend/src/components/VideoCapture.tsx",
          "operation": "modify",
          "description": "Replace remaining hero/intro copy that uses the old name (e.g., the main headline) with \"MR.AI UMPIRE\"-consistent wording while keeping the feature description intact."
        },
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update the document <title> (and any other visible metadata text) to reflect the app name \"MR.AI UMPIRE\"."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Eliminate placeholder/empty frontend code and fix theme-toggle behavior when the theme is set to \"system\".",
      "acceptanceCriteria": [
        "Build succeeds with no TypeScript/ESLint errors introduced by empty/unused components.",
        "Theme toggle reliably switches between dark and light even when the initial theme is \"system\".",
        "No blank/empty component renders appear due to placeholder files being imported/used inadvertently."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/UploadSection.tsx",
          "operation": "delete",
          "description": "Remove the empty placeholder component file to prevent accidental imports/blank renders and to avoid TypeScript/ESLint issues."
        },
        {
          "path": "frontend/src/components/Header.tsx",
          "operation": "modify",
          "description": "Fix theme toggle logic for \"system\" theme: base the toggle decision on the resolved theme (light/dark) rather than the raw theme value, so the button reliably switches modes from a system-derived starting state."
        }
      ]
    }
  ]
}